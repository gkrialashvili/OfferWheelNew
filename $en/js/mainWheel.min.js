"use strict";function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}!function(){var POINTS_LIMIT=500,FULL_ROTATION=360,remainingSlotSpins=0,remainingSportSpins=0,SPORT_WHEEL_ID=4,SLOT_WHEEL_ID=5,MAX={0:5e3,1:1e3},errorMessage={ge:"დაფიქსირდა შეცდომა ცადეთ მოგვიანებით",en:"SORRY, THERE IS A PROBLEM PLEASE TRY LATER",ru:"EGT фриспинов"},giftTypes={"5burninghotfs":{ge:"EGT ფრისპინი",en:"EGT freespins",ru:"попробуй позже"},freebet:{ge:"₾ ფრიბეთი",en:"₾ freebet",ru:"₾ фрибетов"},bonus:{ge:"ფრისპინი და ერთი უფასო დატრიალება",en:"FREESPINS AND 1 FREE SPIN OF THE WHEEL",ru:"ФРИСПИНОВ И 1 БЕСПЛАТНОЕ ВРАЩЕНИЕ КОЛЕСА"},bonusFreebet:{ge:"₾ ფრიბეთი და ბორბლის 1 უფასო დატრიალება",en:"₾ FREEBETS AND 1  FREE SPIN OF THE WHEEL",ru:"₾ ФРИБЕТОВ И 1 БЕСПЛАТНОЕ ВРАЩЕНИЕ КОЛЕСА"},gel:"&#8382;"},slotPrizes=new Map([[1,240],[2,40],[3,120],[4,320],[5,280],[6,80],[7,200],[8,160],[9,0]]),sportPrizes=new Map([[1,30],[2,330],[3,240],[4,90],[5,150],[6,210],[7,300],[8,60],[9,270],[10,120],[11,180],[12,360]]),leastPercantage=new Map([[1,0],[2,20],[3,40],[4,60],[5,80]]),slotSpinsByLevel_50=1,slotSpinsByLevel_250=2,slotSpinsByLevel_500=3,slotSpinsByLevel_2500=4,slotSpinsByLevel_5000=5,sportSpinsBylevel_5=1,sportSpinsBylevel_20=2,sportSpinsBylevel_50=3,sportSpinsBylevel_200=4,sportSpinsBylevel_500=5,sportSpinsBylevel_1000=6,wheelTypes_SLOT="slots",wheelTypes_SPORT="sport",spinsUsedUp_SLOT=0,spinsUsedUp_SPORT=0;function reformatURLS(){var langSwitches=Array.from(document.querySelectorAll(".lang.w-nav-link")),params=window.location.href.split("?")[1];langSwitches.forEach((function(item){return item.href+="?"+params}))}function setBarsInitial(){var fullers;document.querySelectorAll(".progress_line").forEach((function(node){node.innerHTML="";var segments=[createSegment("0"),createSegment("25%"),createSegment("50%"),createSegment("75%")];node.append.apply(node,segments)}))}function createSegment(leftOffset){var seg=document.createElement("div");seg.style.position="absolute",seg.style.height="10px",seg.style.width="25%",seg.style.left=leftOffset;var filler=document.createElement("div");return filler.style.height="10px",seg.appendChild(filler),seg}function addListeners(userData){var _dropOldEvents=dropOldEvents(getSpinBtns()),slotSpinner=_dropOldEvents.slotSpinner,sportSpinner=_dropOldEvents.sportSpinner,_getWheels=getWheels(),slotWheel=_getWheels.slotWheel,sportWheel=_getWheels.sportWheel;slotSpinner.addEventListener("click",(function(){0!==remainingSlotSpins&&draw(userData,5,slotWheel)})),sportSpinner.addEventListener("click",(function(){0!==remainingSportSpins&&draw(userData,4,sportWheel)}))}function dropOldEvents(btns){var slotSpinner=btns.slotSpinner,sportSpinner=btns.sportSpinner;return{slotSpinner:cloneNode(slotSpinner),sportSpinner:cloneNode(sportSpinner)}}function cloneNode(node){var parent=node.parentNode,newBtn=node.cloneNode(!0);return node.remove(),parent.appendChild(newBtn),newBtn}function getUserData(userData){getSlotData(userData),getSportData(userData)}function getSlotData(userData){fetch("https://cms.crocobet.com/campaigns/daily-slot-wheel-080221/user",{headers:{"X-ODDS-SESSION":userData.xOdds}}).then((function(r){return r.json()})).then((function(res){var slotSpinner=getSpinBtns().slotSpinner;if(res&&res.data&&res.data.metadata){var userInfo=res.data.metadata,pointAmount=userInfo.points%5e3,level=userInfo.levels[userInfo.unlockedLevel-1];(remainingSlotSpins=userInfo.unlockedLevel-userInfo.currentLevel)<0&&(remainingSlotSpins=0),getLabels().slotLbl.innerHTML=remainingSlotSpins;var basePoints=userInfo.levels[userInfo.unlockedLevel-1]||0,nextPoints=userInfo.levels[userInfo.unlockedLevel]||userInfo.levels[userInfo.levels.length-1],extraPoints,extraPercentage=(pointAmount-basePoints)/Math.max(nextPoints-basePoints,1)*100;drawBar(userInfo.unlockedLevel,extraPercentage,0,pointAmount,userInfo.currentLevel),0!==remainingSlotSpins&&slotSpinner.classList.add("active")}})).catch((function(err){console.error("BONUS-WHEEL-ERROR: ",err)}))}function getSportData(userData){fetch("https://cms.crocobet.com/campaigns/sport-wheel-1502/user",{headers:{"X-ODDS-SESSION":userData.xOdds}}).then((function(r){return r.json()})).then((function(res){var sportSpinner=getSpinBtns().sportSpinner;if(res&&res.data&&res.data.metadata){var userInfo=res.data.metadata,pointAmount=userInfo.points%5e3,level=userInfo.levels[userInfo.unlockedLevel-1];(remainingSportSpins=userInfo.unlockedLevel-userInfo.currentLevel)<0&&(remainingSportSpins=0),getLabels().sportLbl.innerHTML=remainingSportSpins;var basePoints=userInfo.levels[userInfo.unlockedLevel-1]||0,nextPoints=userInfo.levels[userInfo.unlockedLevel]||userInfo.levels[userInfo.levels.length-1],extraPoints,extraPercentage=(userInfo.points-basePoints)/Math.max(nextPoints-basePoints,1)*100;drawBar(userInfo.unlockedLevel,extraPercentage,1,pointAmount,userInfo.currentLevel),0!==remainingSportSpins&&sportSpinner.classList.add("active")}})).catch((function(err){console.error("ERROR: ",err)}))}function drawBar(segment,percentageInSegment,barNum,points,currentProgressNum,filled){for(var line=document.querySelectorAll(".progress_line")[barNum],barColor=0===barNum?"#4963d7":"#03b730",segments=line.children,currentSegment=0;currentSegment<segment;){var curr=segments[currentSegment].children[0];curr.style.width="100%",curr.style.background=barColor,currentSegment++}if(0!==currentSegment&&segments[currentSegment]){var next=segments[currentSegment].children[0];next.style.width=percentageInSegment+"%",next.style.background=barColor}var cursor,filledSegments=25*currentSegment,cursorIncrementInSegment=25*percentageInSegment/100,zeroInSegment=6===currentSegment,cursorLbl;document.querySelectorAll(".ind_wrp")[barNum].style.left=0===currentSegment?"0":"calc("+filledSegments+"% + "+(zeroInSegment?0:cursorIncrementInSegment)+"%)",document.getElementById(0===barNum?"slot_prgs":"sport_prgrs").innerHTML=(zeroInSegment?MAX[barNum]:Math.floor(points))+" &#8382;";var progressGrid=document.querySelectorAll(".prize_grid")[barNum],progressPts=[].concat(_toConsumableArray(progressGrid.children)).filter((function(child){return child.classList.contains("progress_point")}));if(progressPts.forEach((function(pt){pt.classList.remove("active"),pt.children[0].classList.remove(0===barNum?"active-b":"active")})),0!==currentSegment)for(var i=0;i<segment;i++)progressPts[i].classList.add("active"),progressPts[i].children[0].classList.add(0===barNum?"active-b":"active")}function draw(userData,wheelId,wheel){var WHEEL_ID=wheelId;fetch("https://cms.crocobet.com/campaigns/sport-wheel-1502/get-prize",{method:"POST",headers:{"X-ODDS-SESSION":userData.xOdds}}).then((function(r){if(r.ok)return r.json();throw new Error("დაფიქსირდა შეცდომა სცადეთ მოგვიანებით")})).then((function(res){var _getSpinBtns=getSpinBtns(),slotSpinner=_getSpinBtns.slotSpinner,sportSpinner=_getSpinBtns.sportSpinner,prize,prizeWon,prizeId,prizeType;5===WHEEL_ID?(prize=res.data.prize,prizeWon=prize.amount,prizeId=prize.id,prizeType=prize.type,remainingSlotSpins&&(spinTheWheel(wheel,prizeId,WHEEL_ID),remainingSlotSpins--,setTimeout((function(){openGiftPopup(prizeWon,prizeType)}),5200),getLabels().slotLbl.innerHTML=remainingSlotSpins,0===remainingSlotSpins&&slotSpinner.classList.remove("active"))):4===WHEEL_ID&&function(){var prize=res.data.prize,prizeWon=prize.amount,prizeId=prize.id,prizeType=prize.type,prizeBonus=prize.bonus;remainingSportSpins&&(spinTheWheel(wheel,prizeId,WHEEL_ID),remainingSportSpins--,"5burninghotfs"!==prizeType&&(document.querySelectorAll(".text-block-640")[0].innerHTML=""),setTimeout((function(){openGiftPopup(prizeWon,prizeType,prizeBonus)}),5200),getLabels().sportLbl.innerHTML=remainingSportSpins,0===remainingSportSpins&&sportSpinner.classList.remove("active"))}()})).catch((function(err){var Error;console.error("ERROR: ",err),showErrorModal(errorMessage[langToken])}))}function spinTheWheel(wheelRef,id,wheelId){var rndSpins,angleOnWheel,rotAmount=360*Math.floor(3+Math.random())+(5===wheelId?slotPrizes.get(id):sportPrizes.get(id));wheelRef.style.transition="all 5s cubic-bezier(0.25, 0.1, 0.25, 1) 0.1s",wheelRef.style.transform="rotate("+rotAmount+"deg)"}function openGiftPopup(prizeAmount,prizeLabel,prizeBonus){var giftModal=document.querySelector(".popup-frsp"),prizeLbl=document.getElementById("frsp"),gifCongrats=document.querySelector(".text-block-638");giftModal.classList.remove("hide");var langToken=getLangToken();if("5burninghotfs"===prizeLabel?(document.getElementById("popPlayWeb").href="https://www.crocobet.com/#/slots?menu=egt&provider=egt&slot=burninghot",document.getElementById("popPlayMob").href="https://m.crocobet.com/#/slots?provider=egt&provider=egt&slot=burninghot"):"freebet"===prizeLabel&&(document.getElementById("popPlayWeb").href="https://www.crocobet.com/#/sports/prematch",document.getElementById("popPlayMob").href="https://www.crocobet.com/#/sports/prematch"),!0===prizeBonus&&10===prizeAmount){var prize="gel"===prizeLabel?giftTypes:giftTypes.bonus[langToken];gifCongrats.style.display="none",document.querySelector(".text-block-639").style.marginTop="110px"}else if(!0===prizeBonus&&5===prizeAmount){var prize="gel"===prizeLabel?giftTypes:giftTypes.bonusFreebet[langToken];gifCongrats.style.display="none",document.querySelector(".text-block-639").style.marginTop="110px"}else{var prize="gel"===prizeLabel?giftTypes:giftTypes[prizeLabel][langToken];gifCongrats.style.display="block",document.querySelector(".text-block-639").style.marginTop="10px",document.querySelector(".text-block-638").style.marginTop="100px"}prizeLbl.innerHTML=prizeAmount+" "+prize,listenForPopupQuit()}function getLangToken(){var url,baseUrl,urlSegments=window.location.href.split("?")[0].split("/");return urlSegments[urlSegments.length-2].split(".")[0]}function listenForPopupQuit(){var giftPopupCloseBtn;document.querySelector(".close_pop").addEventListener("click",(function(e){resetWheelSpin(),e.target.style.cursor="pointer",e.target.parentElement.classList.add("hide")}))}function resetWheelSpin(){var _getWheels2=getWheels(),slotWheel,sportWheel;[_getWheels2.slotWheel,_getWheels2.sportWheel].forEach((function(wheel){wheel.style.transition="",wheel.style.transform=""}))}function getSlotHistory(userData){fetch("https://cms.crocobet.com/campaigns/daily-slot-wheel-080221/history",{headers:{"X-ODDS-SESSION":userData.xOdds}}).then((function(r){return r.json()})).then((function(historyData){var historyItems;historyData&&historyData.data&&updateHistoryList(historyData.data.map((function(historyItem){return{time:historyItem.createdAt,prize:{amount:historyItem.prize.amount,type:historyItem.prize.type,bonus:historyItem.prize.bonus}}})),5)}))}function getSportHistory(userData){fetch("https://cms.crocobet.com/campaigns/sport-wheel-1502/history",{headers:{"X-ODDS-SESSION":userData.xOdds}}).then((function(r){if(r.ok)return r.json();throw new Error})).then((function(historyData){var historyItems;historyData&&historyData.data&&updateHistoryList(historyData.data.map((function(historyItem){return{time:historyItem.createdAt,prize:{amount:historyItem.prize.amount,type:historyItem.prize.type,bonus:historyItem.prize.bonus}}})),4)})).catch(error=>{console.log(error)})}function showErrorModal(error){let errorText=document.querySelectorAll("#error-text"),errorModal=document.querySelector(".error-modal-container");errorText.innerHTML=error,errorModal.style.display="flex"}function updateHistoryList(historyItems,wheelId){var containers=document.querySelectorAll("#slotboardsr"),container=5===wheelId?containers[0]:containers[1];container.innerHTML="",historyItems.forEach((function(item){var date=new Date(item.time),hItem=document.createElement("div");hItem.classList.add("borbal_lb_content"),4===wheelId&&hItem.classList.add("sport");var timeLbl=document.createElement("div"),prizeLbl=document.createElement("div");timeLbl.classList.add("lb_date"),prizeLbl.classList.add("lb_prize"),timeLbl.innerHTML=prependZero(date.getDate())+"."+prependZero(date.getMonth()+1);var langToken=getLangToken();!0===item.prize.bonus&&10===item.prize.amount?prizeLbl.innerHTML=item.prize.amount+" "+giftTypes.bonus[langToken]:!0===item.prize.bonus&&5===item.prize.amount?prizeLbl.innerHTML=item.prize.amount+" "+giftTypes.bonusFreebet[langToken]:prizeLbl.innerHTML=item.prize.amount+" "+giftTypes[item.prize.type][langToken],hItem.appendChild(timeLbl),hItem.appendChild(prizeLbl),container.appendChild(hItem)}))}function determineSegment(amount,lineMarks){for(var checkpoints=[].concat(_toConsumableArray(lineMarks)),segmentCounter=0,i=0;i<checkpoints.length;i++)if(amount<=checkpoints[i])return++segmentCounter}function readParams(){var params=new URLSearchParams(window.location.search),userId=params.get("id"),tk=params.get("tk");return{id:userId,xOdds:atob(tk)}}function getWheels(){var wheels=document.querySelectorAll(".wheel_frsp");return{slotWheel:wheels[0],sportWheel:wheels[1]}}function getSpinBtns(){var slot,sport;return{slotSpinner:document.getElementById("slotSpinner"),sportSpinner:document.getElementById("sportSpiner")}}function getCursorLbls(){return{slotIndicator:document.getElementById("slot_prgs"),sportIndicator:document.getElementById("sport_prgrs")}}function getLabels(){return{slotLbl:document.getElementById("slot"),sportLbl:document.getElementById("sport")}}function getCashLabels(){return{slotCash:document.getElementById("slot_cash_amount"),sportCash:document.getElementById("sport_cash_amount")}}function prependZero(num){return num<=10?"0"+num:num}window.onload=function(){reformatURLS();var userInfo=readParams();getUserData(userInfo),addListeners(userInfo),document.querySelector(".bt-bb").addEventListener("click",(function(){return getSlotHistory(userInfo)})),document.querySelector(".bt-bb.sport").addEventListener("click",(function(){return getSportHistory(userInfo)})),setBarsInitial()},document.querySelector(".error-modal-container").addEventListener("click",(function(){let errorModal;document.querySelector(".error-modal-container").style.display="none"}))}();var dt=new Date,time=dt.getHours()+":"+dt.getMinutes()+":"+dt.getSeconds();function changeImage(){$(".bonus_img").toggle()}window.setInterval(changeImage,1500);const terms=$(".accordion_item_trigger-t");$(document).ready((function(){$(terms).append("<img class='arow' src='images/wheel/arow.png' alt=''>");let arrow=$(".arow");arrow.first().css("margin-right","27px"),arrow.last().css("margin-right","27px")})),$(terms).click((function(){$(this).children(".arow").toggleClass("rotateThatBitch")}));